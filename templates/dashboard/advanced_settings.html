{% extends 'base.html' %}

{% block title %}Advanced settings | Bear Blog{% endblock %}

{% block custom_styles %}
    {% include 'styles/blog/default.css' %}
    {% include 'styles/dashboard.css' %}
    {{ request.user.settings.dashboard_styles | safe }}
{% endblock %}

{% block content %}
<h1>Advanced settings</h1>
<form method="POST" class="post-form full-width">
    {% csrf_token %}
    <p style="line-height: 0">
        <button type="button" onclick="event.preventDefault(); window.location = '/{{ blog.subdomain }}/dashboard/settings/'">&#8592; Back</button>
        <button type="submit">Save</button>
        <button type="button" onclick="event.preventDefault(); window.open('{{ blog.dynamic_useful_domain }}');">View</button>
    </p>
    {{ form.as_p }}
</form>
{% if request.user.settings.upgraded %}
<hr>
<h2>API access</h2>
<p>Authenticate requests with <code>Authorization: Bearer &lt;token&gt;</code>.</p>
{% if blog.auth_token %}
<p><code>{{ blog.auth_token }}</code></p>
{% else %}
<p>No token generated yet.</p>
{% endif %}
<form method="POST" action="/{{ blog.subdomain }}/dashboard/regenerate-token/">
    {% csrf_token %}
    <button type="submit">{% if blog.auth_token %}Regenerate token{% else %}Generate token{% endif %}</button>
</form>
{% endif %}
{% endblock %}